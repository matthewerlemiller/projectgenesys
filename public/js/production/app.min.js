function Member(a,b,c){this.fName=a,this.lName=b,this.idnum=c,this.fullName=this.fName+" "+this.lName,this.photoURL=function(){return"img/"+this.idnum+".jpg"}}function createNewMember(a,b){memberList[memberList.length]=new Member(a,b,memberList.length)}function searchString(a,b){if(!isNaN(b))var b=b+"";var b=b.toLowerCase(),a=a.toLowerCase();return""!=a&&-1!=b.indexOf(a)?!0:!1}function returnResults(a){for(var b=[],c=0;c<memberList.length;c++){var d=memberList[c];searchString(a,d.fullName)?b.push(memberList[c]):searchString(a,d.idnum)&&b.push(memberList[c])}return b}var app=angular.module("genesys",["angularFileUpload"]);app.factory("Member",function(a){return{search:function(b){return a.post("/member/search",b)},checkIn:function(b){return a.get("/checkin/"+b)},getCheckedIn:function(){return a.get("/checkedin")}}}),app.factory("SharedService",function(a){var b={};return b.broadcastShowCheckedIn=function(){a.$broadcast("showCheckedIn")},b}),app.controller("SearchController",function(a,b,c){a.query="",a.results=[],a.showResults=!1,a.searchForMember=function(){if(a.query.length>=2){var c={query:a.query};b.search(c).success(function(b){a.query.length>=2&&(a.results=b.data,a.showResults=!0)}).error(function(){console.log("There was a problem searching for this member")})}else a.clear()},a.clear=function(){a.showResults=!1,a.results=[]},a.checkIn=function(d,e){b.checkIn(d).success(function(b){console.log(b.message),a.results[e].CheckedIn=!0,setTimeout(function(){c.broadcastShowCheckedIn(),a.results=[],a.query=""},1e3)}).error(function(a){console.log(a.message)})},a.$on("showCheckedIn",function(){a.showResults=!1})}),app.controller("DisplayCheckedInMembers",function(a,b){a.Checklogs=[],a.getCheckedIn=function(){b.getCheckedIn().success(function(b){a.Checklogs=b.data}).error(function(){})},a.getCheckedIn(),a.$on("showCheckedIn",function(){a.getCheckedIn()})});var $search=$(".search"),$result=$(".result"),$resultsWrapper=$(".results-wrapper"),memberList=[];createNewMember("Alexander","Carr"),createNewMember("Brian","Clauzel"),createNewMember("Wesley","Baertsch");